<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Training</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <style>

.instance-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
}

.view-instance-btn {
    background: #f0f8ff;
    border: 1px solid #add8e6;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
}

.view-instance-btn:hover {
    background: #e6f7ff;
    transform: scale(1.1);
}

.view-instance-btn i {
    color: #0275d8;
    font-size: 18px;
}

/* This is for the Alternatives Button*/
.btn-block {
  display: block;
  width: 100%;
  padding: 12px 24px;
  text-align: center;
  font-size: 16px;
  margin-top: 15px;
  transition: all 0.3s ease;
}

.btn-block i {
  margin-right: 10px;
}


/* This is for the New Instances Button*/
.new-instance-button-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 70px 0;
  padding: 40px 0;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
  width: 100%; /* Added to ensure full width */
}

.new-instance-button-section.form-visible {
  border-top-color: transparent;
  border-bottom-color: transparent;
  padding: 0;
  align-items: stretch; /* Changed from center to stretch for full width */
}

/* This is for the Button to replace the Submit New Instance Form*/
.new-instance-button-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 70px 0;
  padding: 40px 0;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
}

.new-instance-button-section.form-visible {
  border-top-color: transparent;
  border-bottom-color: transparent;
  padding: 0;
}

.reveal-form-button {
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #0056b3, #007bff);
  color: white;
  border: none;
  border-radius: 10px;
  padding: 22px 45px;
  font-size: 18px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
  min-width: 360px;
}

.reveal-form-button:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(0, 123, 255, 0.4);
  background: linear-gradient(135deg, #0062cc, #0086ff);
}

.reveal-form-button:active {
  transform: translateY(1px);
}

.button-icon {
  margin-right: 15px;
  font-size: 24px;
}

/* Form container styling */
.training-form-container {
  display: none;
  transform: translateY(-20px);
  opacity: 0;
  transition: all 0.4s ease;
  width: 100%;
  max-width: 1000px;
  margin-top: 30px;
}

/* Form container styling */
.training-form-container {
  display: none;
  transform: translateY(-20px);
  opacity: 0;
  transition: all 0.4s ease;
  width: 100%;
  max-width: 100%; /* Changed from 1000px to 100% to match the page width */
  margin-top: 30px;
}

/* Form header with title and hide button */
.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
}

.hide-form-button {
  background-color: #f8f9fa;
  color: #495057;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 8px 16px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 8px;
}

.hide-form-button:hover {
  background-color: #e9ecef;
  color: #212529;
}

.training-form-container.visible {
  display: block;
  transform: translateY(0);
  opacity: 1;
}



/* This is for the Intro Section with the Robot icon*/
.intro-section {
    margin-bottom: 40px;
}

.intro-container {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 30px;
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    gap: 30px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.intro-icon {
    background: linear-gradient(135deg, #2c5282, #0072ff);
    width: 100px;
    height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    flex-shrink: 0;
}

.intro-icon i {
    font-size: 48px;
    color: white;
}

.intro-content {
    flex: 1;
}

.intro-content h2 {
    font-size: 28px;
    margin-bottom: 15px;
    color: white;
}

.intro-content p {
    color: rgba(255, 255, 255, 0.9);
    font-size: 16px;
    line-height: 1.6;
    margin-bottom: 20px;
}

.intro-benefits {
    display: flex;
    gap: 20px;
    margin-top: 15px;
}

.benefit-item {
    display: flex;
    align-items: center;
    gap: 8px;
    color: rgba(255, 255, 255, 0.9);
    background: rgba(255, 255, 255, 0.1);
    padding: 8px 16px;
    border-radius: 6px;
    font-size: 14px;
    border: 1px solid rgba(255, 255, 255, 0.15);
}

.benefit-item i {
    color: #4ade80;
}

@media (max-width: 768px) {
    .intro-container {
        flex-direction: column;
        text-align: center;
    }
    
    .intro-benefits {
        flex-direction: column;
        align-items: center;
    }
}









/* This ensures the links are displayed correctly in the first place */
.site-navigation > ul > li > a {
    display: inline-block !important;
    color: white !important;
    text-decoration: none !important;
    padding: 8px 12px !important;
    visibility: visible !important;
    opacity: 1 !important;
}

.dropdown .dropdown-menu {
    display: none !important;
}

.dropdown:hover .dropdown-menu {
    display: block !important;
}


/* Larger logo styling */
.logo-title .site-logo {
    height: 200px; /* Try a moderate increase first */
    max-height: 200px; /* Ensure it doesn't get too large */
}
        /* Global Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', sans-serif;
        }
        
        body {
            background: linear-gradient(to bottom right, #19344f, #007bff);
            color: #333;
            margin: 0;
            padding: 0 60px 60px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1, h2, h3 {
            color: white;
            margin-bottom: 20px;
        }
        
        /* Header Styles */
        .site-header {
            background: transparent;
            color: white;
            padding: 10px 0;
            box-shadow: none;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            min-height: 60px;
        }
        
        .logo-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .site-logo {
            height: 40px;
            width: auto;
            object-fit: contain;
        }
        
        .site-title {
            font-size: 28px;
            font-weight: bold;
            margin: 0;
        }
        
        /* Navigation Styles */
        .site-navigation ul {
            list-style: none;
            display: flex;
            gap: 20px;
            margin: 0;
            padding: 0;
        }
        
        .site-navigation > ul > li > a {
            display: inline-block !important;
            color: white !important;
            text-decoration: none !important;
            padding: 8px 12px !important;
            border-radius: 4px;
            font-size: 18px;
            transition: transform 0.3s ease, color 0.3s ease;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        .site-navigation > ul > li > a:hover {
            transform: scale(1.07) !important;
            background-color: transparent !important;
        }
        
        /* Dropdown Styles */
        .dropdown {
            position: relative;
        }
        
        .dropdown-toggle {
            cursor: pointer;
        }
        
        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            min-width: 180px;
            background-color: #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 4px;
            z-index: 1000;
            padding: 8px 0;
        }
        
        .dropdown-menu li {
            display: block;
            width: 100%;
            margin: 0;
        }
        
        .dropdown-menu li a {
            padding: 8px 16px;
            display: block;
            color: #333;
            text-decoration: none;
            transition: background-color 0.2s;
        }
        
        .dropdown-menu li a:hover {
            background-color: #f5f5f5;
        }
        
        .dropdown:hover .dropdown-menu {
            display: block !important;
        }
        
        /* Form Styles */
        .training-form-container {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .training-form h2 {
            color: #19344f;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #19344f;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-control:focus {
            border-color: #007bff;
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
        }
        
        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background-color: #007bff;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        /* Submitted Instances Queue */
        .submitted-instances {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .submitted-instances h2 {
            color: #19344f;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .instance-card {
            border: 1px solid #eee;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 15px;
            background-color: #f9f9f9;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .instance-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .instance-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .instance-date {
            color: #666;
            font-size: 14px;
        }
        
        .instance-flagged {
            font-weight: 500;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #ffe6e6;
            border-left: 4px solid #dc3545;
            border-radius: 4px;
        }
        
        .instance-alternatives {
            margin-top: 15px;
        }
        
        .alternative {
            padding: 8px 12px;
            background-color: #e6f7ff;
            border-left: 4px solid #007bff;
            border-radius: 4px;
            margin-bottom: 8px;
        }
        
        .alert {
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            display: none;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .no-instances-message {
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 4px;
            font-style: italic;
            color: #6c757d;
            text-align: center;
        }
        
        /* Spinner for loading */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0, 123, 255, 0.3);
            border-radius: 50%;
            border-top-color: #007bff;
            animation: spin 1s ease-in-out infinite;
            margin-left: 10px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Footer Styles */
        footer {
            text-align: center;
            margin-top: 60px;
            padding: 20px 0;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="site-header">
        <div class="header-container">
            <!-- Logo and Site Title -->
            <div class="logo-title">
                <img src="/logo.png" alt="Logo" class="site-logo">
                
            </div>
            
            <!-- Navigation -->
            <nav class="site-navigation">
                <ul>
                    <li>
                        <a href="/">Compliance Check</a>
                    </li>
		    <li>
                        <a href="/profile">Profile</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle">Admin <i class="fa fa-caret-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="/manage-disclosures">Disclosures</a></li>
                            <li><a href="/assign-disclosures">Personalization</a></li>
                            <li><a href="/training">System Training</a></li>
                            <li><a href="/admin-access">Admin Access</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="/login">Logout</a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>
    
    <div class="intro-section">
    <div class="intro-container">
        <div class="intro-icon">
            <i class="fas fa-robot"></i>
        </div>
        <div class="intro-content">
            <h2>System Training</h2>
            <p>The system is trained on basic principles of compliant communication. Your submissions train the system to better recognize non-compliant language and provide more customized alternatives.</p>
            <div class="intro-benefits">
                <div class="benefit-item">
                    <i class="fas fa-check-circle"></i>
                    <span>Improve accuracy</span>
                </div>
                <div class="benefit-item">
                    <i class="fas fa-brain"></i>
                    <span>Train the System</span>
                </div>
                <div class="benefit-item">
                    <i class="fas fa-shield-alt"></i>
                    <span>Strengthen compliance</span>
                </div>
            </div>
        </div>
    </div>
</div>
        <!-- Success Alert -->
        <div id="successAlert" class="alert alert-success">
            Your instance has been successfully submitted for training. Thank you for your contribution!
        </div>
        
        <!-- Button section - clean version -->
<div class="new-instance-button-section" id="buttonSection">
  <button id="revealFormButton" class="reveal-form-button">
    <span class="button-icon"><i class="fas fa-plus-circle"></i></span>
    <span class="button-text">Create New Training Instance</span>
  </button>
  
  <!-- Training Form Container -->
  <div class="training-form-container">
    <form id="trainingForm" class="training-form">
      <div class="form-header">
        <h2>Submit New Instance</h2>
        <button type="button" id="hideFormButton" class="hide-form-button">
          <i class="fas fa-times"></i> Hide Form
        </button>
      </div>
      
      <div class="form-group">
        <label for="flaggedSentence">Flagged Sentence/Phrase:</label>
        <textarea id="flaggedSentence" name="flaggedSentence" class="form-control" required placeholder="Enter the non-compliant text that needs alternatives..."></textarea>
      </div>

      <!-- Single button to add all alternatives -->
<div id="addAlternativesButtonContainer" style="display: none; margin-bottom: 25px;">
  <button type="button" class="btn btn-primary btn-block" id="addAlternativesButton">
    <i class="fas fa-plus-circle"></i> Add Compliance Alternatives
  </button>
</div>
      
      <div class="form-group" id="alternative1Section" style="display: none;">
        <label for="alternative1">Compliant Alternative 1:</label>
        <textarea id="alternative1" name="alternative1" class="form-control" required placeholder="Enter a compliant alternative..."></textarea>
      </div>
      
      <div class="form-group" id="alternative2Section" style="display: none;">
        <label for="alternative2">Compliant Alternative 2:</label>
        <textarea id="alternative2" name="alternative2" class="form-control" required placeholder="Enter another compliant alternative..."></textarea>
      </div>
      
      <div class="form-group" id="alternative3Section" style="display: none;">
        <label for="alternative3">Compliant Alternative 3:</label>
        <textarea id="alternative3" name="alternative3" class="form-control" required placeholder="Enter a third compliant alternative..."></textarea>
      </div>
      
      <div class="form-group" id="notesSection" style="display: none;">
        <label for="notes">Additional Notes (Optional):</label>
        <textarea id="notes" name="notes" class="form-control" placeholder="Any additional context or notes..."></textarea>
      </div>
      
      <!-- Validation message above the buttons -->
      <div id="validationMessage" style="color: #dc3545; margin-bottom: 15px; font-weight: bold; padding: 10px; border: 1px solid #dc3545; border-radius: 4px; background-color: #fff8f8; display: none;">
        Flagged Sentence and All 3 Compliant Alternative Boxes must be filled before submission.
      </div>

      <!-- Buttons -->
      <div id="formButtons" style="display: none; margin-top: 20px;">
      <div style="margin-bottom: 15px; color: #6c757d; font-style: italic;">
    Must enter at least 3 alternatives before submitting
  </div>
      <div style="display: flex; gap: 10px;">
        <button type="button" class="btn btn-primary" id="addNoteButton">Add note before submitting</button>
        <button type="button" class="btn btn-primary" id="submitButton" disabled>
          Submit for Training
          <span id="submitSpinner" class="spinner" style="display: none;"></span>
        </button>
      </div>
    </form>
  </div>
</div>
</div>
        
        
<!-- Submitted Instances Box (Collapsible) -->
<div class="submitted-instances">
    <div class="instances-header" style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;">
        <h2>Recently Submitted Instances</h2>
        <i class="fas fa-chevron-down" id="instancesToggleIcon"></i>
    </div>
    <div id="instancesQueue" style="display: none;">
        <!-- Instances will be added here dynamically -->
        <div class="no-instances-message" id="noInstancesMessage">
            No instances have been submitted yet.
        </div>
    </div>
</div>
    
    <footer>
        &copy; 2025 Finalyze, LLC. All Rights Reserved.
    </footer>
    
    <script>
        // Store submitted instances in localStorage for persistence
        let trainingInstances = JSON.parse(localStorage.getItem('trainingInstances')) || [];
        
        // Display existing instances on page load
        document.addEventListener('DOMContentLoaded', function() {
            displayInstances();
            
            // Form submission handler
            document.getElementById('trainingForm').addEventListener('submit', function(e) {
                e.preventDefault();
                submitInstance();
            });
        });
        
        function submitInstance() {
    // Show spinner
    const submitButton = document.getElementById('submitButton');
    const spinner = document.getElementById('submitSpinner');
    submitButton.disabled = true;
    spinner.style.display = 'inline-block';
    
    // Get form values
    const flaggedSentence = document.getElementById('flaggedSentence').value;
    const alternative1 = document.getElementById('alternative1').value;
    const alternative2 = document.getElementById('alternative2').value;
    const alternative3 = document.getElementById('alternative3').value;
    const notes = document.getElementById('notes') ? document.getElementById('notes').value : '';
    
    // Create new instance object
    const newInstance = {
        id: Date.now(),
        date: new Date().toISOString(),
        flaggedSentence,
        alternatives: [alternative1, alternative2, alternative3],
        notes
    };
    
    // Simulate API call with timeout
    setTimeout(() => {
        // Add to local storage
        trainingInstances.unshift(newInstance); // Add to beginning of array
        if (trainingInstances.length > 20) {
            trainingInstances = trainingInstances.slice(0, 20); // Keep only 20 most recent
        }
        localStorage.setItem('trainingInstances', JSON.stringify(trainingInstances));
        
        // Reset form
        document.getElementById('trainingForm').reset();
        
        // Hide all the alternative sections
        document.getElementById('alternative1Section').style.display = 'none';
        document.getElementById('alternative2Section').style.display = 'none';
        document.getElementById('alternative3Section').style.display = 'none';
        document.getElementById('notesSection').style.display = 'none';
        document.getElementById('addAlternativesButtonContainer').style.display = 'none';
        
        // Show success message
        const successAlert = document.getElementById('successAlert');
        successAlert.style.display = 'block';
        setTimeout(() => {
            successAlert.style.display = 'none';
        }, 5000);
        
        // Update displayed instances
        displayInstances();
        
        // Reset button state
        submitButton.disabled = false;
        spinner.style.display = 'none';
        
    }, 1500); // Simulate network delay
}
        
        function displayInstances() {
    const queueContainer = document.getElementById('instancesQueue');
    const noInstancesMessage = document.getElementById('noInstancesMessage');
    
    // Clear current content
    queueContainer.innerHTML = '';
    
    if (trainingInstances.length === 0) {
        queueContainer.appendChild(noInstancesMessage);
        return;
    }
    
    // Loop through the instances array and add each one to the display
    trainingInstances.forEach(instance => {
        // Create instance card
        const card = document.createElement('div');
        card.className = 'instance-card';
        
        // Format the date
        const date = new Date(instance.date);
        const formattedDate = `${date.toLocaleDateString()} at ${date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;
        
        // Build card HTML - with eye icon next to Instance ID
        card.innerHTML = `
            <div class="instance-header">
                <div style="display: flex; align-items: center;">
                    <strong>Instance ID: ${instance.id}</strong>
                    <button class="view-instance-btn" title="View details" style="margin-left: 10px;">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <span class="instance-date">Submitted on ${formattedDate}</span>
            </div>
            <div class="instance-content" style="display: none;">
                <div class="instance-flagged">
                    <div><strong>Flagged Text:</strong></div>
                    <div>${instance.flaggedSentence}</div>
                </div>
                <div class="instance-alternatives">
                    <div><strong>Compliant Alternatives:</strong></div>
                    ${instance.alternatives.map((alt, index) => 
                        alt ? `<div class="alternative">Alternative ${index + 1}: ${alt}</div>` : ''
                    ).join('')}
                </div>
                ${instance.notes ? `<div style="margin-top: 10px;"><strong>Notes:</strong> ${instance.notes}</div>` : ''}
            </div>
        `;
        
        // Add the card to the container
        queueContainer.appendChild(card);
        
        // Add click event to the eye button
        const viewButton = card.querySelector('.view-instance-btn');
        const content = card.querySelector('.instance-content');
        
        viewButton.addEventListener('click', () => {
            content.style.display = content.style.display === 'none' ? 'block' : 'none';
            // Toggle icon between eye and eye-slash
            const icon = viewButton.querySelector('i');
            if (content.style.display === 'none') {
                icon.classList.replace('fa-eye-slash', 'fa-eye');
                viewButton.title = "View details";
            } else {
                icon.classList.replace('fa-eye', 'fa-eye-slash');
                viewButton.title = "Hide details";
            }
        });
    });
}
        
        // Admin functionality - Add the ability to delete instances (for administrators)
        function deleteInstance(id) {
            // Filter out the instance with the given id
            trainingInstances = trainingInstances.filter(instance => instance.id !== id);
            
            // Update localStorage
            localStorage.setItem('trainingInstances', JSON.stringify(trainingInstances));
            
            // Update the display
            displayInstances();
        }
        
        // Dropdown menu functionality
        document.addEventListener('DOMContentLoaded', function() {
            const dropdowns = document.querySelectorAll('.dropdown');
            
            dropdowns.forEach(dropdown => {
                dropdown.addEventListener('mouseenter', function() {
                    this.querySelector('.dropdown-menu').style.display = 'block';
                });
                
                dropdown.addEventListener('mouseleave', function() {
                    this.querySelector('.dropdown-menu').style.display = 'none';
                });
            });
        });

// Toggle notes section
document.addEventListener('DOMContentLoaded', function() {
    const addNoteButton = document.getElementById('addNoteButton');
    const notesSection = document.getElementById('notesSection');
    
    addNoteButton.addEventListener('click', function() {
        notesSection.style.display = 'block';
        addNoteButton.style.display = 'none';
    });
});

// Show alternatives when the add alternatives button is clicked
document.addEventListener('DOMContentLoaded', function() {
  const flaggedSentence = document.getElementById('flaggedSentence');
  const addAlternativesButton = document.getElementById('addAlternativesButton');
  const addAlternativesButtonContainer = document.getElementById('addAlternativesButtonContainer');
  
  const alternative1Section = document.getElementById('alternative1Section');
  const alternative2Section = document.getElementById('alternative2Section');
  const alternative3Section = document.getElementById('alternative3Section');
  const formButtons = document.getElementById('formButtons');
  
  // Show the add alternatives button only when text is entered in the flagged sentence box
  flaggedSentence.addEventListener('input', function() {
    if (this.value.trim()) {
      addAlternativesButtonContainer.style.display = 'block';
    } else {
      addAlternativesButtonContainer.style.display = 'none';
    }
  });
  
  // When the add alternatives button is clicked, show all three alternative sections
  addAlternativesButton.addEventListener('click', function() {
    alternative1Section.style.display = 'block';
    alternative2Section.style.display = 'block';
    alternative3Section.style.display = 'block';
    addAlternativesButtonContainer.style.display = 'none'; // Hide the button after clicking
    formButtons.style.display = 'block'; // Show the form buttons (Add note and Submit)
  });
});

// Validate form before submission
document.addEventListener('DOMContentLoaded', function() {
    const flaggedSentence = document.getElementById('flaggedSentence');
    const alternative1 = document.getElementById('alternative1');
    const alternative2 = document.getElementById('alternative2');
    const alternative3 = document.getElementById('alternative3');
    const submitButton = document.getElementById('submitButton');
    const validationMessage = document.getElementById('validationMessage');
    const addAlternativesButton = document.getElementById('addAlternativesButton');
    
    const alternative1Section = document.getElementById('alternative1Section');
    const alternative2Section = document.getElementById('alternative2Section');
    const alternative3Section = document.getElementById('alternative3Section');
    
    // Create an array of all required inputs
    const requiredInputs = [flaggedSentence, alternative1, alternative2, alternative3];
    
    // Function to check if all required fields are filled
    function validateForm() {
        let allFilled = true;
        
        // Check if flagged sentence is filled
        if (!flaggedSentence.value.trim()) allFilled = false;
        
        // Check if alternative sections are visible and filled
        if (alternative1Section.style.display !== 'none') {
            if (!alternative1.value.trim()) allFilled = false;
        } else {
            allFilled = false; // If section not visible, form is not complete
        }
        
        if (alternative2Section.style.display !== 'none') {
            if (!alternative2.value.trim()) allFilled = false;
        } else {
            allFilled = false;
        }
        
        if (alternative3Section.style.display !== 'none') {
            if (!alternative3.value.trim()) allFilled = false;
        } else {
            allFilled = false;
        }
        
        // Enable or disable submit button
        submitButton.disabled = !allFilled;
        
        // Hide validation message when form becomes valid
        if (allFilled) {
            validationMessage.style.display = 'none';
        }
    }
    
    // Add event listeners to all inputs
    requiredInputs.forEach(input => {
        input.addEventListener('input', validateForm);
    });
    
    // Trigger validation when alternatives are shown
    document.getElementById('addAlternativesButton').addEventListener('click', function() {
        // Give a moment for the sections to become visible
        setTimeout(validateForm, 100);
    });
    
    // Submit button click handler
    submitButton.addEventListener('click', function(e) {
        // Check if the button is disabled
        if (this.disabled) {
            e.preventDefault();
            validationMessage.style.display = 'block';
            
            // Scroll to the validation message
            validationMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // Highlight which sections need to be filled
            if (!flaggedSentence.value.trim()) {
                flaggedSentence.style.borderColor = '#dc3545';
            }
            
            if (alternative1Section.style.display !== 'none' && !alternative1.value.trim()) {
                alternative1.style.borderColor = '#dc3545';
            }
            
            if (alternative2Section.style.display !== 'none' && !alternative2.value.trim()) {
                alternative2.style.borderColor = '#dc3545';
            }
            
            if (alternative3Section.style.display !== 'none' && !alternative3.value.trim()) {
                alternative3.style.borderColor = '#dc3545';
            }
            
            if (alternative1Section.style.display === 'none') {
                addAlternativesButton.style.borderColor = '#dc3545';
            }
            
            // Reset border colors after 3 seconds
            setTimeout(function() {
                flaggedSentence.style.borderColor = '';
                alternative1.style.borderColor = '';
                alternative2.style.borderColor = '';
                alternative3.style.borderColor = '';
                addAlternativesButton.style.borderColor = '';
            }, 3000);
        } else {
            // If the button is enabled, submit the form
            submitInstance();
        }
    });
    
    // Reset field border color when user starts typing
    requiredInputs.forEach(input => {
        input.addEventListener('input', function() {
            this.style.borderColor = '';
        });
    });
    
    // Initial validation
    validateForm();
});


// For the Button that reveals the Submit New Instance Box
document.addEventListener('DOMContentLoaded', function() {
  const buttonSection = document.getElementById('buttonSection');
  const revealFormButton = document.getElementById('revealFormButton');
  const hideFormButton = document.getElementById('hideFormButton');
  const formContainer = document.querySelector('.training-form-container');
  
  // Show form when clicking the reveal button
  revealFormButton.addEventListener('click', function() {
    formContainer.classList.add('visible');
    revealFormButton.style.display = 'none';
    buttonSection.classList.add('form-visible');
    
    // Smooth scroll to the form
    formContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
  });
  
  // Hide form when clicking the hide form button
  hideFormButton.addEventListener('click', function() {
    formContainer.classList.remove('visible');
    revealFormButton.style.display = 'flex';
    buttonSection.classList.remove('form-visible');
    
    // Scroll back to the button section
    buttonSection.scrollIntoView({ 
      behavior: 'smooth', 
      block: 'start' 
    });
  });
});

// Make the recently submitted instances section collapsible
document.addEventListener('DOMContentLoaded', function() {
    const instancesHeader = document.querySelector('.instances-header');
    const instancesQueue = document.getElementById('instancesQueue');
    const instancesToggleIcon = document.getElementById('instancesToggleIcon');
    
    instancesHeader.addEventListener('click', function() {
        if (instancesQueue.style.display === 'none') {
            instancesQueue.style.display = 'block';
            instancesToggleIcon.classList.replace('fa-chevron-down', 'fa-chevron-up');
        } else {
            instancesQueue.style.display = 'none';
            instancesToggleIcon.classList.replace('fa-chevron-up', 'fa-chevron-down');
        }
    });
});
    </script>
</body>
</html>